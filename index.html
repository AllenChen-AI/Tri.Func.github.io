<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¸‰è§’å‡½æ•¸å…¬å¼æ¸¬é©—</title>
    <!-- å¼•å…¥ Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- å¼•å…¥ React å’Œ ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <!-- å¼•å…¥ Babel ç”¨æ–¼è§£æ JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <style>
        body {
            font-family: 'Segoe UI', Microsoft JhengHei, sans-serif;
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-800">
    <div id="root"></div>

    <script type="text/babel">
        // ç°¡å–®çš„ SVG Icon å…ƒä»¶æ›¿ä»£ Lucide-reactï¼Œç¢ºä¿å–®æª”å¯åŸ·è¡Œ
        const IconRefresh = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"/><path d="M21 3v5h-5"/><path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"/><path d="M8 16H3v5"/></svg>
        );
        const IconCheck = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="text-green-500 mb-2 animate-bounce"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg>
        );
        const IconX = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="text-red-500 mb-2 animate-pulse"><circle cx="12" cy="12" r="10"/><line x1="15" y1="9" x2="9" y2="15"/><line x1="9" y1="9" x2="15" y2="15"/></svg>
        );
        const IconAward = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="8" r="7"/><polyline points="8.21 13.89 7 23 12 20 17 23 15.79 13.88"/></svg>
        );
        const IconBook = () => (
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/></svg>
        );

        const App = () => {
            const [currentQuestion, setCurrentQuestion] = React.useState(null);
            const [score, setScore] = React.useState(0);
            const [streak, setStreak] = React.useState(0);
            const [bestStreak, setBestStreak] = React.useState(0);
            const [feedback, setFeedback] = React.useState(null); 
            const [showCheatSheet, setShowCheatSheet] = React.useState(false);

            const questions = [
                { q: "sin(-Î¸)", a: "-sin Î¸", type: "è² è§’" },
                { q: "cos(-Î¸)", a: "cos Î¸", type: "è² è§’" },
                { q: "tan(-Î¸)", a: "-tan Î¸", type: "è² è§’" },
                { q: "sin(180Â° - Î¸)", a: "sin Î¸", type: "180Â° Â± Î¸" },
                { q: "cos(180Â° - Î¸)", a: "-cos Î¸", type: "180Â° Â± Î¸" },
                { q: "tan(180Â° - Î¸)", a: "-tan Î¸", type: "180Â° Â± Î¸" },
                { q: "sin(180Â° + Î¸)", a: "-sin Î¸", type: "180Â° Â± Î¸" },
                { q: "cos(180Â° + Î¸)", a: "-cos Î¸", type: "180Â° Â± Î¸" },
                { q: "tan(180Â° + Î¸)", a: "tan Î¸", type: "180Â° Â± Î¸" },
                { q: "sin(360Â° - Î¸)", a: "-sin Î¸", type: "360Â° - Î¸" },
                { q: "cos(360Â° - Î¸)", a: "cos Î¸", type: "360Â° - Î¸" },
                { q: "tan(360Â° - Î¸)", a: "-tan Î¸", type: "360Â° - Î¸" },
                { q: "sin(90Â° + Î¸)", a: "cos Î¸", type: "90Â° + Î¸" },
                { q: "cos(90Â° + Î¸)", a: "-sin Î¸", type: "90Â° + Î¸" },
                { q: "sin(270Â° - Î¸)", a: "-cos Î¸", type: "270Â° Â± Î¸" },
                { q: "cos(270Â° - Î¸)", a: "-sin Î¸", type: "270Â° Â± Î¸" },
                { q: "sin(270Â° + Î¸)", a: "-cos Î¸", type: "270Â° Â± Î¸" },
                { q: "cos(270Â° + Î¸)", a: "sin Î¸", type: "270Â° Â± Î¸" },
            ];

            const options = [
                { label: "sin Î¸", value: "sin Î¸" },
                { label: "-sin Î¸", value: "-sin Î¸" },
                { label: "cos Î¸", value: "cos Î¸" },
                { label: "-cos Î¸", value: "-cos Î¸" },
                { label: "tan Î¸", value: "tan Î¸" },
                { label: "-tan Î¸", value: "-tan Î¸" },
            ];

            const generateQuestion = () => {
                let randomIndex;
                do {
                    randomIndex = Math.floor(Math.random() * questions.length);
                } while (questions.length > 1 && currentQuestion && questions[randomIndex].q === currentQuestion.q);

                setCurrentQuestion(questions[randomIndex]);
                setFeedback(null);
            };

            React.useEffect(() => {
                generateQuestion();
            }, []);

            const handleAnswer = (selectedAnswer) => {
                if (feedback) return;

                if (selectedAnswer === currentQuestion.a) {
                    setScore(score + 10);
                    const newStreak = streak + 1;
                    setStreak(newStreak);
                    if (newStreak > bestStreak) setBestStreak(newStreak);
                    setFeedback('correct');
                } else {
                    setStreak(0);
                    setFeedback('incorrect');
                }

                setTimeout(() => {
                    generateQuestion();
                }, 1500);
            };

            return (
                <div className="min-h-screen bg-slate-50 text-slate-800 p-4 font-sans flex flex-col items-center justify-center">
                    
                    {/* Header */}
                    <div className="w-full max-w-md bg-white rounded-2xl shadow-sm p-4 mb-6 flex justify-between items-center border border-slate-200">
                        <div className="flex flex-col">
                            <span className="text-xs text-slate-500 uppercase tracking-wider font-bold">ç›®å‰åˆ†æ•¸</span>
                            <span className="text-2xl font-black text-blue-600">{score}</span>
                        </div>
                        <div className="flex flex-col items-end">
                            <div className="flex items-center gap-1 text-orange-500">
                                <IconAward />
                                <span className="text-xs font-bold uppercase">é€£å°</span>
                            </div>
                            <span className="text-2xl font-black text-orange-500">{streak}</span>
                        </div>
                    </div>

                    {/* Question Card */}
                    <div className="w-full max-w-md bg-white rounded-3xl shadow-xl overflow-hidden border border-slate-200 relative select-none">
                        <div className="h-2 bg-slate-100 w-full">
                            <div 
                                className="h-full bg-blue-500 transition-all duration-500 ease-out" 
                                style={{ width: `${Math.min((streak / 10) * 100, 100)}%` }}
                            />
                        </div>

                        <div className="p-8 text-center min-h-[200px] flex flex-col items-center justify-center">
                            <span className="text-slate-400 text-sm font-medium mb-2 bg-slate-100 px-3 py-1 rounded-full">
                                {currentQuestion?.type || "é¡Œç›®"}
                            </span>
                            <h1 className="text-4xl sm:text-5xl font-black text-slate-800 tracking-tight my-4">
                                {currentQuestion?.q}
                            </h1>
                            <p className="text-slate-400 text-sm">è«‹é¸æ“‡æ­£ç¢ºçš„åŒ–ç°¡çµæœ</p>
                        </div>

                        {feedback && (
                            <div className={`absolute inset-0 flex flex-col items-center justify-center z-10 backdrop-blur-sm bg-opacity-90 transition-all duration-300 ${feedback === 'correct' ? 'bg-green-50/90' : 'bg-red-50/90'}`}>
                                {feedback === 'correct' ? (
                                    <>
                                        <IconCheck />
                                        <h2 className="text-2xl font-bold text-green-700">ç­”å°äº†ï¼</h2>
                                        <p className="text-green-600 font-medium">{currentQuestion.q} = {currentQuestion.a}</p>
                                    </>
                                ) : (
                                    <>
                                        <IconX />
                                        <h2 className="text-2xl font-bold text-red-700">ç­”éŒ¯äº†</h2>
                                        <p className="text-slate-600 mt-2">æ­£ç¢ºç­”æ¡ˆæ˜¯ï¼š</p>
                                        <p className="text-2xl font-bold text-slate-800 mt-1">{currentQuestion.a}</p>
                                    </>
                                )}
                            </div>
                        )}
                    </div>

                    {/* Options */}
                    <div className="w-full max-w-md mt-6 grid grid-cols-2 gap-3">
                        {options.map((option) => (
                            <button
                                key={option.value}
                                onClick={() => handleAnswer(option.value)}
                                disabled={feedback !== null}
                                className={`
                                    p-4 rounded-xl text-xl font-bold transition-all duration-200 shadow-sm border
                                    ${feedback === null 
                                        ? 'bg-white hover:bg-blue-50 hover:border-blue-300 border-slate-200 text-slate-700 active:scale-95' 
                                        : 'bg-slate-100 text-slate-300 border-slate-100 cursor-not-allowed'}
                                `}
                            >
                                {option.label}
                            </button>
                        ))}
                    </div>

                    {/* Footer */}
                    <div className="mt-8 flex gap-4">
                        <button 
                            onClick={() => setShowCheatSheet(!showCheatSheet)}
                            className="flex items-center gap-2 px-4 py-2 bg-white rounded-full text-slate-600 text-sm font-medium shadow-sm hover:bg-slate-50 border border-slate-200"
                        >
                            <IconBook />
                            {showCheatSheet ? "éš±è—é‡é»" : "æŸ¥çœ‹é‡é»æ•´ç†"}
                        </button>
                        
                        <button 
                            onClick={() => {
                                setScore(0);
                                setStreak(0);
                                generateQuestion();
                            }}
                            className="flex items-center gap-2 px-4 py-2 bg-white rounded-full text-slate-600 text-sm font-medium shadow-sm hover:bg-slate-50 border border-slate-200"
                        >
                            <IconRefresh />
                            é‡ç½®
                        </button>
                    </div>

                    {/* Cheat Sheet */}
                    {showCheatSheet && (
                        <div className="w-full max-w-md mt-4 bg-yellow-50 p-6 rounded-2xl border border-yellow-200 text-yellow-900 text-sm shadow-inner">
                            <h3 className="font-bold text-lg mb-3 flex items-center gap-2">
                                ğŸ“Œ é‡é»ç­†è¨˜
                            </h3>
                            <ul className="space-y-3 list-disc pl-4">
                                <li>
                                    <span className="font-bold">å¥‡è®Šå¶ä¸è®Šï¼š</span>
                                    <div className="text-yellow-800/80 mt-1">
                                        90Â°, 270Â° (å¥‡æ•¸å‹) â†’ å‡½æ•¸è®Š â†’ sinè®Šcos, cosè®Šsin<br/>
                                        180Â°, 360Â° (å¶æ•¸å‹) â†’ å‡½æ•¸ä¸è®Š
                                    </div>
                                </li>
                                <li>
                                    <span className="font-bold">æ­£è² çœ‹è±¡é™ï¼š</span>
                                    <div className="text-yellow-800/80 mt-1">
                                        åˆ¤æ–·<span className="underline">åŸå‡½æ•¸</span>æ‰€åœ¨è±¡é™çš„æ­£è² ã€‚<br/>
                                        (ä¾‹: sin åœ¨ç¬¬äºŒè±¡é™æ˜¯æ­£çš„ï¼Œcos æ˜¯è² çš„)
                                    </div>
                                </li>
                                <li>
                                    <span className="font-bold">è² è§’å…¬å¼ï¼š</span>
                                    <div className="text-yellow-800/80 mt-1">
                                        cos(-Î¸) = cos Î¸ (å¶å‡½æ•¸)<br/>
                                        sin(-Î¸) = -sin Î¸ (å¥‡å‡½æ•¸)<br/>
                                        tan(-Î¸) = -tan Î¸ (å¥‡å‡½æ•¸)
                                    </div>
                                </li>
                            </ul>
                        </div>
                    )}
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
